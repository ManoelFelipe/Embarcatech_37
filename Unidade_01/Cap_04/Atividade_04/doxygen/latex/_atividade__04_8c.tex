\doxysection{C\+:/\+Users/manoe/\+One\+Drive/\+TI/\+Embarca\+Tech/\+Segunda Fase/01\+\_\+\+Unid.01\+\_\+\+Microcontrolador/\+Atividades/\+Cap\+\_\+04/\+Atividade\+\_\+04/\+Atividade\+\_\+04/src/\+Atividade\+\_\+04.c File Reference}
\hypertarget{_atividade__04_8c}{}\label{_atividade__04_8c}\index{C:/Users/manoe/OneDrive/TI/EmbarcaTech/Segunda Fase/01\_Unid.01\_Microcontrolador/Atividades/Cap\_04/Atividade\_04/Atividade\_04/src/Atividade\_04.c@{C:/Users/manoe/OneDrive/TI/EmbarcaTech/Segunda Fase/01\_Unid.01\_Microcontrolador/Atividades/Cap\_04/Atividade\_04/Atividade\_04/src/Atividade\_04.c}}


Simulação de semáforo de trânsito com acessibilidade para pedestres.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include "{}pico/stdlib.\+h"{}}\newline
{\ttfamily \#include "{}hardware/gpio.\+h"{}}\newline
{\ttfamily \#include "{}hardware/timer.\+h"{}}\newline
{\ttfamily \#include "{}hardware/i2c.\+h"{}}\newline
{\ttfamily \#include "{}ssd1306\+\_\+i2c.\+h"{}}\newline
{\ttfamily \#include "{}ssd1306.\+h"{}}\newline
{\ttfamily \#include "{}ssd1306\+\_\+font.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{_atividade__04_8c_ad12a564ad91765abf118b1a1c935a79b}\label{_atividade__04_8c_ad12a564ad91765abf118b1a1c935a79b} 
\#define {\bfseries RED\+\_\+\+TIME\+\_\+\+SEC}~10
\begin{DoxyCompactList}\small\item\em Tempo total de sinal vermelho (s) \end{DoxyCompactList}\item 
\Hypertarget{_atividade__04_8c_a4807eaf5581317c4277f82c741f105ac}\label{_atividade__04_8c_a4807eaf5581317c4277f82c741f105ac} 
\#define {\bfseries GREEN\+\_\+\+TIME\+\_\+\+SEC}~10
\begin{DoxyCompactList}\small\item\em Tempo total de sinal verde (s) \end{DoxyCompactList}\item 
\Hypertarget{_atividade__04_8c_aa878f52b8595a099574f3a1c12717b73}\label{_atividade__04_8c_aa878f52b8595a099574f3a1c12717b73} 
\#define {\bfseries YELLOW\+\_\+\+TIME\+\_\+\+SEC}~3
\begin{DoxyCompactList}\small\item\em Tempo total de sinal amarelo (s) \end{DoxyCompactList}\item 
\Hypertarget{_atividade__04_8c_a2b5f3cdada392dfc73422e30dc494bde}\label{_atividade__04_8c_a2b5f3cdada392dfc73422e30dc494bde} 
\#define {\bfseries COUNTDOWN\+\_\+\+START}~5
\begin{DoxyCompactList}\small\item\em Início da contagem regressiva (últimos segundos) \end{DoxyCompactList}\item 
\Hypertarget{_atividade__04_8c_ab9824ab080c30006c1baaa0dd7e863c5}\label{_atividade__04_8c_ab9824ab080c30006c1baaa0dd7e863c5} 
\#define {\bfseries LED\+\_\+\+RED\+\_\+\+PIN}~13
\begin{DoxyCompactList}\small\item\em Pino do LED vermelho. \end{DoxyCompactList}\item 
\Hypertarget{_atividade__04_8c_a0539be032702009fb24beec89c6fa0c0}\label{_atividade__04_8c_a0539be032702009fb24beec89c6fa0c0} 
\#define {\bfseries LED\+\_\+\+GREEN\+\_\+\+PIN}~11
\begin{DoxyCompactList}\small\item\em Pino do LED verde. \end{DoxyCompactList}\item 
\Hypertarget{_atividade__04_8c_a5aec9d3b503fb1a30a21b16c7be86cff}\label{_atividade__04_8c_a5aec9d3b503fb1a30a21b16c7be86cff} 
\#define {\bfseries LED\+\_\+\+BLUE\+\_\+\+PIN}~12
\begin{DoxyCompactList}\small\item\em Pino do LED azul (não usado) \end{DoxyCompactList}\item 
\Hypertarget{_atividade__04_8c_acbc26198121732a3c0a6888f8f4cb028}\label{_atividade__04_8c_acbc26198121732a3c0a6888f8f4cb028} 
\#define {\bfseries BUZZER\+\_\+\+PIN1}~10
\begin{DoxyCompactList}\small\item\em Pino do buzzer principal. \end{DoxyCompactList}\item 
\Hypertarget{_atividade__04_8c_a6a9a564ed2b8f42d387f38dac7ed1b62}\label{_atividade__04_8c_a6a9a564ed2b8f42d387f38dac7ed1b62} 
\#define {\bfseries BUZZER\+\_\+\+PIN2}~21
\begin{DoxyCompactList}\small\item\em Pino do buzzer secundário. \end{DoxyCompactList}\item 
\Hypertarget{_atividade__04_8c_aad905e2ee036ff31a5cc49b248361420}\label{_atividade__04_8c_aad905e2ee036ff31a5cc49b248361420} 
\#define {\bfseries BUTTON\+\_\+\+PIN1}~5
\begin{DoxyCompactList}\small\item\em Botão lado 1 (prioridade em empate) \end{DoxyCompactList}\item 
\Hypertarget{_atividade__04_8c_ab7676ab9bef15c1956c8163558e3ac44}\label{_atividade__04_8c_ab7676ab9bef15c1956c8163558e3ac44} 
\#define {\bfseries BUTTON\+\_\+\+PIN2}~6
\begin{DoxyCompactList}\small\item\em Botão lado 2. \end{DoxyCompactList}\item 
\Hypertarget{_atividade__04_8c_a2cade698267beb86ccaa38c14d35ab0f}\label{_atividade__04_8c_a2cade698267beb86ccaa38c14d35ab0f} 
\#define {\bfseries I2\+C\+\_\+\+SDA\+\_\+\+PIN}~14
\item 
\Hypertarget{_atividade__04_8c_a0e4e08bab2fb484136d18b067bef372c}\label{_atividade__04_8c_a0e4e08bab2fb484136d18b067bef372c} 
\#define {\bfseries I2\+C\+\_\+\+SCL\+\_\+\+PIN}~15
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248}{state\+\_\+t}} \{ \mbox{\hyperlink{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248ad2aaf0c286ae52532c96f716b3410aed}{ST\+\_\+\+RED}} = 0
, \mbox{\hyperlink{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248a3680d3e43be15ef8b428fe0a64956b90}{ST\+\_\+\+GREEN}}
, \mbox{\hyperlink{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248a7b5984aa066eb4676d7f8747429d5f3b}{ST\+\_\+\+YELLOW}}
 \}
\begin{DoxyCompactList}\small\item\em Estados possíveis do semáforo. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{_atividade__04_8c_a840291bc02cba5474a4cb46a9b9566fe}{main}} (void)
\begin{DoxyCompactList}\small\item\em Função principal\+: inicializa hardware e entra em loop de espera. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Simulação de semáforo de trânsito com acessibilidade para pedestres. 

Implementa ciclo semafórico fixo (Vermelho → Verde → Amarelo) e lógica de travessia para pedestres. Ao acionar botão em vermelho, reinicia-\/se o temporizador para 10 s completos e exibe-\/se contagem regressiva nos últimos 5 s no display OLED. Botões em verde/amarelo agendam countdown no próximo vermelho. Em vermelho, buzzer em GP10 e GP21 bipam a 1 Hz. Usei estilo Doxygen e comentários completos. Para fins didáticos.

• Ciclo semafórico fixo\+: Vermelho 10 s → Verde 10 s → Amarelo 3 s ↺ ~\newline
 Requisitos de pedestre\+: ~\newline

\begin{DoxyItemize}
\item Em VERMELHO\+: qualquer botão reinicia contagem para 10 s, exibe ~\newline
 imediatamente "{}\+Sinal\+: VERMELHO"{} e, nos últimos 5 s, mostra ~\newline
 contagem regressiva no OLED. ~\newline

\item Em VERDE ou AMARELO\+: botão A/B agenda countdown no próximo VERMELHO; Verde encurtado se pedido em VERDE.
\item Travessia bidirecional\+: um botão em cada lado da avenida (BUTTON\+\_\+\+PIN1 e BUTTON\+\_\+\+PIN2). Quando ambos são acionados simultaneamente, define-\/se prioridade para BUTTON\+\_\+\+PIN1 (lado 1) sobre BUTTON\+\_\+\+PIN2 (lado 2). ~\newline
 • Buzzer soa 1 Hz SEMPRE em VERMELHO. -\/ Acessibilidade ~\newline
 • Botão A (GPIO 5) ou Botão B (6). • Lógica baseada em IRQ GPIO + temporizador 1 Hz. Sem polling intenso.
\end{DoxyItemize}

Hardware\+:
\begin{DoxyItemize}
\item LED RGB\+: GP11 (Verde), GP13 (Vermelho) (GP12 não usado)
\item Buzzer\+: GP10, GP21
\item Botões\+: GP5, GP6 (INPUT\+\_\+\+PULLUP)
\item OLED\+: I2\+C1 SDA GP14, SCL GP15
\end{DoxyItemize}

\begin{DoxyAuthor}{Author}
Manoel Furtado 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
15 mai 2025 
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
2025 Manoel Furtado (MIT License) (veja LICENSE.\+md) 
\end{DoxyCopyright}


\doxysubsection{Enumeration Type Documentation}
\Hypertarget{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248}\index{Atividade\_04.c@{Atividade\_04.c}!state\_t@{state\_t}}
\index{state\_t@{state\_t}!Atividade\_04.c@{Atividade\_04.c}}
\doxysubsubsection{\texorpdfstring{state\_t}{state\_t}}
{\footnotesize\ttfamily \label{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248} 
enum \mbox{\hyperlink{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248}{state\+\_\+t}}}



Estados possíveis do semáforo. 

\begin{DoxyEnumFields}[2]{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{ST\_RED@{ST\_RED}!Atividade\_04.c@{Atividade\_04.c}}\index{Atividade\_04.c@{Atividade\_04.c}!ST\_RED@{ST\_RED}}}\Hypertarget{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248ad2aaf0c286ae52532c96f716b3410aed}\label{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248ad2aaf0c286ae52532c96f716b3410aed} 
ST\+\_\+\+RED&Vermelho \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{ST\_GREEN@{ST\_GREEN}!Atividade\_04.c@{Atividade\_04.c}}\index{Atividade\_04.c@{Atividade\_04.c}!ST\_GREEN@{ST\_GREEN}}}\Hypertarget{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248a3680d3e43be15ef8b428fe0a64956b90}\label{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248a3680d3e43be15ef8b428fe0a64956b90} 
ST\+\_\+\+GREEN&Verde \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{ST\_YELLOW@{ST\_YELLOW}!Atividade\_04.c@{Atividade\_04.c}}\index{Atividade\_04.c@{Atividade\_04.c}!ST\_YELLOW@{ST\_YELLOW}}}\Hypertarget{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248a7b5984aa066eb4676d7f8747429d5f3b}\label{_atividade__04_8c_aa0aafed44fec19806d8f9ad834be1248a7b5984aa066eb4676d7f8747429d5f3b} 
ST\+\_\+\+YELLOW&Amarelo \\
\hline

\end{DoxyEnumFields}


\doxysubsection{Function Documentation}
\Hypertarget{_atividade__04_8c_a840291bc02cba5474a4cb46a9b9566fe}\index{Atividade\_04.c@{Atividade\_04.c}!main@{main}}
\index{main@{main}!Atividade\_04.c@{Atividade\_04.c}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily \label{_atividade__04_8c_a840291bc02cba5474a4cb46a9b9566fe} 
int main (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Função principal\+: inicializa hardware e entra em loop de espera. 


\begin{DoxyEnumerate}
\item Chama hw\+\_\+init() para configurar GPIOs, I2C e display OLED.
\item Define cor inicial do semáforo para vermelho e exibe no OLED.
\item Adiciona timer periódico de 1 Hz para gerenciar transições de estado e contagem regressiva.
\item Entra em loop infinito com tight\+\_\+loop\+\_\+contents(), permitindo que a CPU aguarde de forma eficiente por interrupções de botões e callbacks. \begin{DoxyReturn}{Returns}
Esta função não retorna. 
\end{DoxyReturn}

\end{DoxyEnumerate}